(this["webpackJsonpyoutube-loop-react-redux-class-component"]=this["webpackJsonpyoutube-loop-react-redux-class-component"]||[]).push([[0],{152:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(7),r=n.n(a),d=n(22),s=n(5),l=n(42),c=n(27),u={videos:[],playingVideo:{id:null}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload,i=null;switch(n){case"ADD_VIDEO_BY_YOUTUBE_ID":var a=Math.max.apply(Math,Object(c.a)(e.videos.map((function(e){return e.id}))).concat([0])),r={id:a+1,youtubeId:o.youtubeId,volume:null,range:[null,null]};return Object(s.a)({},e,{videos:[].concat(Object(c.a)(e.videos),[r])});case"ADD_VIDEO":return Object(s.a)({},e,{videos:[].concat(Object(c.a)(e.videos),[o.video])});case"PLAY_VIDEO":return e.playingVideo.videoId!==o.videoId?Object(s.a)({},e,{playingVideo:{id:o.videoId}}):e;case"PLAY_FIRST_VIDEO":return e.videos.length>0?Object(s.a)({},e,{playingVideo:{id:e.videos[0].id}}):e;case"PLAY_NEXT_VIDEO":var d;return d=(i=e.videos.findIndex((function(t){return t.id===e.playingVideo.id})))===e.videos.length-1?0:i+1,Object(s.a)({},e,{playingVideo:{id:e.videos[d].id}});case"PLAY_PREVIOUS_VIDEO":var l;return l=0===(i=e.videos.findIndex((function(t){return t.id===e.playingVideo.id})))?e.videos.length-1:i-1,Object(s.a)({},e,{playingVideo:{id:e.videos[l].id}});case"UPDATE_VIDEOS":return Object(s.a)({},e,{videos:Object(c.a)(o.videos)});case"REMOVE_VIDEO":var p=null;if(null!==(i=e.videos.findIndex((function(e){return e.id===o.videoId})))){e.playingVideo.id===o.videoId&&(p=e.videos.length<=1?{id:null}:{id:e.videos[i===e.videos.length-1?0:i+1].id});var v=Object(c.a)(e.videos);return v.splice(i,1),null!==p?Object(s.a)({},e,{videos:v,playingVideo:p}):Object(s.a)({},e,{videos:v})}return e;case"EDIT_VIDEO":if(null!==(i=e.videos.findIndex((function(e){return e.id===o.video.id})))){var h=Object(c.a)(e.videos);return h.splice(i,1,o.video),Object(s.a)({},e,{videos:h})}return e;default:return e}},v=n(77),h=n.n(v),y={videos:[],playingVideo:{id:null}},m=(n(91),n(8)),f=n(9),b=n(10),V=n(11),g=n(6),O=(n(92),n(93),function(e){Object(V.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.className+" button";return this.props.color&&(e+=" button--".concat(this.props.color)),i.a.createElement("button",{className:e,onClick:this.props.onClick},this.props.children)}}]),n}(o.Component)),E=function(e){var t=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);return void 0!==t[2]?t[2].split(/[^0-9a-z_-]/i)[0]:e},j=function(e){Object(V.a)(n,e);var t=Object(b.a)(n);function n(e){var o;return Object(m.a)(this,n),(o=t.call(this,e)).state={input:""},o.handleInputChange=o.handleInputChange.bind(Object(g.a)(o)),o}return Object(f.a)(n,[{key:"handleInputChange",value:function(e){this.setState({input:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.videos.length,n=null!==this.props.playingVideo.id,o=n&&t>1;return i.a.createElement("header",{className:"header"},i.a.createElement("div",{className:"container"},i.a.createElement("a",{href:"/",className:"header__logo"},"YouTube Loop"),t>0&&i.a.createElement("div",{className:"header__controls"},n?i.a.createElement(O,{onClick:this.props.onStopButtonClick},"Stop"):i.a.createElement(O,{onClick:this.props.onPlayButtonClick},"Play"),o&&i.a.createElement(i.a.Fragment,null,i.a.createElement(O,{onClick:this.props.onPreviousButtonClick},"Previous"),i.a.createElement(O,{onClick:this.props.onNextButtonClick},"Next"))),i.a.createElement("div",{className:"header__input-group"},i.a.createElement("input",{type:"text",className:"header__input",placeholder:"Enter YouTube URL or Video ID",value:this.state.input,onChange:this.handleInputChange}),i.a.createElement("div",{className:"header__input-group-append"},i.a.createElement(O,{color:"blue",onClick:function(){return e.props.onAddButtonClick(e.state.input)}},"Go Loop!")))))}}]),n}(o.Component),I=Object(d.b)((function(e){return{videos:e.videos,playingVideo:e.playingVideo}}),(function(e){return{onAddButtonClick:function(t){e({type:"ADD_VIDEO_BY_YOUTUBE_ID",payload:{youtubeId:E(t)}})},onPlayButtonClick:function(){e({type:"PLAY_FIRST_VIDEO"})},onStopButtonClick:function(){e({type:"PLAY_VIDEO",payload:{videoId:null}})},onNextButtonClick:function(){e({type:"PLAY_NEXT_VIDEO"})},onPreviousButtonClick:function(){e({type:"PLAY_PREVIOUS_VIDEO"})}}}))(j),_=(n(94),n(81));n(95);var k=null;function C(){return k||(k=new Promise((function(e){if("object"!==typeof window.YT||"function"!==typeof window.YT.ready){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.onYouTubeIframeAPIReady=function(){e(window.YT)}}else window.YT.ready((function(){e(window.YT)}))}))),k}var D=function(e){Object(V.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(m.a)(this,n),(i=t.call(this,e)).container=Object(o.createRef)(),i.handleVideoReady=i.handleVideoReady.bind(Object(g.a)(i)),i.handleVideoStateChange=i.handleVideoStateChange.bind(Object(g.a)(i)),i}return Object(f.a)(n,[{key:"handleVideoReady",value:function(){"function"===typeof this.props.onReady&&this.props.onReady(this.player)}},{key:"handleVideoStateChange",value:function(e){e.data===this.YT.PlayerState.PLAYING?"function"===typeof this.props.onPlaying&&this.props.onPlaying():e.data===this.YT.PlayerState.PAUSED?"function"===typeof this.props.onPaused&&this.props.onPaused():e.data===this.YT.PlayerState.ENDED&&"function"===typeof this.props.onEnded&&this.props.onEnded()}},{key:"componentDidMount",value:function(){var e=this;C().then((function(t){e.YT=t,e.player=new t.Player(e.container.current,{videoId:e.props.youtubeId,events:{onReady:e.handleVideoReady,onStateChange:e.handleVideoStateChange}})}))}},{key:"render",value:function(){return i.a.createElement("div",{ref:this.container})}}]),n}(o.Component);function P(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),o=e-3600*t-60*n;return t>0?"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(o.toString().padStart(2,"0")):"".concat(n,":").concat(o.toString().padStart(2,0))}var S=n(62),N=(n(151),function(e){Object(V.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(m.a)(this,n),(i=t.call(this,e)).container=Object(o.createRef)(),i.videoLoaded=!1,i.player=null,i.duration=0,i.title="",i.interval=null,i.setVideoVolume=i.setVideoVolume.bind(Object(g.a)(i)),i.setVideoRange=i.setVideoRange.bind(Object(g.a)(i)),i.removeVideo=i.removeVideo.bind(Object(g.a)(i)),i.onVideoLoaded=i.onVideoLoaded.bind(Object(g.a)(i)),i.onPlaying=i.onPlaying.bind(Object(g.a)(i)),i.onEnded=i.onEnded.bind(Object(g.a)(i)),i.onError=i.onError.bind(Object(g.a)(i)),i.trackStatus=i.trackStatus.bind(Object(g.a)(i)),i}return Object(f.a)(n,[{key:"setVideoVolume",value:function(e){this.player&&this.player.setVolume(e),this.props.editVideo(Object(s.a)({},this.props.video,{volume:e}))}},{key:"setVideoRange",value:function(e){if(this.player&&this.props.playingVideo.id===this.props.video.id){var t=this.player.getCurrentTime();e[0]>t&&this.player.seekTo(e[0])}this.props.editVideo(Object(s.a)({},this.props.video,{range:e}))}},{key:"removeVideo",value:function(){this.props.removeVideo(this.props.video.id)}},{key:"onVideoLoaded",value:function(e){var t=e.getDuration();this.videoLoaded=!1,t?(this.player=e,this.duration=t,null!==this.props.video.volume&&null!==this.props.video.range[0]&&null!==this.props.video.range[1]||this.props.editVideo(Object(s.a)({},this.props.video,{volume:e.getVolume(),range:[0,t]})),this.props.playingVideo.id===this.props.video.id&&(e.setVolume(this.props.video.volume),e.seekTo(this.props.video.range[0],!0),e.playVideo(),document.title=this.title+" - YouTube Loop in React Redux")):this.props.removeVideo(this.props.video.id),this.videoLoaded=!0}},{key:"onPlaying",value:function(){this.props.playingVideo.id!==this.props.video.id&&this.props.playVideo(this.props.video.id)}},{key:"onEnded",value:function(){this.props.playNextVideo()}},{key:"onError",value:function(){this.props.removeVideo(this.props.video)}},{key:"trackStatus",value:function(){if(this.player){var e=this.player.getCurrentTime(),t=this.player.getPlayerState(),n=this.player.getVolume();n!==this.props.video.volume&&this.setVideoVolume(n),1===t&&e>this.props.video.range[1]&&this.onEnded()}}},{key:"componentDidMount",value:function(){this.interval=setInterval(this.trackStatus,500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidUpdate",value:function(e){this.player&&this.props.playingVideo!==e.playingVideo&&(this.props.playingVideo.id===this.props.video.id?(this.player.setVolume(this.props.video.volume),this.player.seekTo(this.props.video.range[0],!0),this.player.playVideo(),document.title=this.title+" - YouTube Loop in React Redux",this.container.current.scrollIntoView({behavior:"smooth",block:"center"})):(this.player.pauseVideo(),document.title="YouTube Loop in React Redux"))}},{key:"render",value:function(){var e=this.props.videos.length>1,t="video"+(this.props.playingVideo.id===this.props.video.id?" video--active":"");return i.a.createElement("div",{ref:this.container,className:t},i.a.createElement("div",{className:"video__player"},i.a.createElement(D,{youtubeId:this.props.video.youtubeId,onReady:this.onVideoLoaded,onPlaying:this.onPlaying,onEnded:this.onEnded,onError:this.onError})),this.videoLoaded&&i.a.createElement(i.a.Fragment,null,i.a.createElement(S.b,{className:"video__volume-slider",vertical:"true",value:this.props.video.volume,onChange:this.setVideoVolume}),i.a.createElement(S.a,{className:"video__range-slider",max:this.duration,value:this.props.video.range,onChange:this.setVideoRange}),i.a.createElement("div",{className:"video__info"},"Volume: ".concat(this.props.video.volume," \u2014 Range: ").concat(P(this.props.video.range[0])," \u2192 ").concat(P(this.props.video.range[1])))),i.a.createElement("div",{className:"video__buttons"},e&&i.a.createElement(O,{className:"video__move-handle"},"Move"),i.a.createElement(O,{color:"red",onClick:this.removeVideo},"Remove Video")))}}]),n}(o.Component)),T=Object(d.b)((function(e){return{videos:e.videos,playingVideo:e.playingVideo}}),(function(e){return{removeVideo:function(t){e(function(e){return{type:"REMOVE_VIDEO",payload:{videoId:e}}}(t))},editVideo:function(t){e(function(e){return{type:"EDIT_VIDEO",payload:{video:e}}}(t))},playVideo:function(t){e(function(e){return{type:"PLAY_VIDEO",payload:{videoId:e}}}(t))},playNextVideo:function(){e({type:"PLAY_NEXT_VIDEO"})}}}))(N),R=function(e){Object(V.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return this.props.videos.length?i.a.createElement(_.a,{tag:"ul",list:this.props.videos,setList:this.props.updateVideos,handle:".video__move-handle",className:"video-list"},this.props.videos.map((function(e){return i.a.createElement("li",{key:e.id,className:"video-item"},i.a.createElement(T,{video:e}))}))):null}}]),n}(o.Component),Y=Object(d.b)((function(e){return{videos:e.videos}}),(function(e){return{updateVideos:function(t){e(function(e){return{type:"UPDATE_VIDEOS",payload:{videos:e}}}(t))}}}))(R),w=function(e){Object(V.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"main"},i.a.createElement("div",{className:"container"},i.a.createElement(Y,null)))}}]),n}(o.Component),L=function(e){Object(V.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(I,null),i.a.createElement(w,null))}}]),n}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=function(e){if(void 0===e){var t=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}();e=Object(s.a)({},y,{},t)}var n=Object(l.b)(p,e);return n.subscribe(h()((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}}(n.getState())}),1e3)),n}();r.a.render(i.a.createElement(d.a,{store:A},i.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},82:function(e,t,n){e.exports=n(152)},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){}},[[82,1,2]]]);
//# sourceMappingURL=main.60e943cc.chunk.js.map